<div class="banner-left">
    <div class="choose">
        <ul>
            <li>
                <a href="/main/show">
                    <span class="icon"><ion-icon name="home-outline"></ion-icon></span>
                    <span class="title">Web Enterprise</span>
                </a>
            </li>
            {{#if home}}
            {{!-- <li>
                <a href="/main/show">
                    <span class="icon"><ion-icon name="home-outline"></ion-icon></span>
                    <span class="title">Web Enterprise</span>
                </a>
            </li> --}}
                <li>
                    <a href="#">
                        <span class="icon"></span>
                        <span class="title" onclick="getus()">About Us</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <span class="icon"></span>
                        <span class="title" onclick="thisProject()">About Project</span>
                    </a>
                </li>
                <button class="loginBtn" onclick="loginf()">Login</button>
            {{/if}}
            {{!-- <li>
               <a href="#">
                   <span class="icon"><ion-icon name="help-outline"></ion-icon></span>
                   <span class="title" onclick="questionList()">Ideas</span>
               </a>
           </li> --}}
            <!--            <li>-->
            <!--                <a href="#">-->
            <!--                    <span class="icon"><ion-icon name="person-outline"></ion-icon></span>-->
            <!--                    <span class="title" onclick="profileList()">Profile</span>-->
            <!--                </a>-->
            <!--            </li>-->
            {{#ifCond check "===" "admin"}}
                <h2>Public</h2>
                <li>
                    <a href="#">
                        <span class="icon"><ion-icon name="help-outline"></ion-icon></span>
                        <span class="title" onclick="questionList()">Ideas</span>
                    </a>
                </li>
                <h2>Admin</h2>
                <li>
                    <a href="/auth/listAccount">
                        <span class="icon"><ion-icon name="list-outline"></ion-icon></span>
                        <span class="title">Manage account</span>
                    </a>
                </li>
                <li>
                    <a href="/auth/registerPage">
                        <span class="icon"><ion-icon name="person-add-outline"></ion-icon></span>
                        <span class="title">Create New Account</span>
                    </a>
                </li>
                <li>
                    <a href="/task/listTask">
                        <span class="icon"><ion-icon name="list-outline"></ion-icon></span>
                        <span class="title">List Task</span>
                    </a>
                </li>
                <li>
                    <a href="/task/createTask">
                        <span class="icon"><ion-icon name="create-outline"></ion-icon></span>
                        <span class="title">Create New Task</span>
                    </a>
                </li>
                <li>
                    <a href="/auth/logout" class="lout">
                        <span class="icon"><ion-icon name="log-out-outline"></ion-icon></span>
                        <span class="title">Logout</span>
                    </a>
                </li>
            {{/ifCond}}
            {{#ifCond check "===" "staff"}}
                <h2>Public</h2>
                <li>
                    <a href="#">
                        <span class="icon"><ion-icon name="help-outline"></ion-icon></span>
                        <span class="title" onclick="questionList()">Ideas</span>
                    </a>
                </li>
                <h2>Staff</h2>
                <li>
                    <a href="/idea/create">
                        <span class="icon"><ion-icon name="receipt-outline"></ion-icon></span>
                        <span class="title">Submit Docs</span>
                    </a>
                </li>
                <li>
                    <a href="/idea/listCategory">
                        <span class="icon"><ion-icon name="receipt-outline"></ion-icon></span>
                        <span class="title">List Category</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <span class="icon"><ion-icon name="people-outline"></ion-icon></span>
                        <span class="title">For Staff</span>
                    </a>
                </li>
                <li>
                    <a href="/auth/logout" class="lout">
                        <span class="icon"><ion-icon name="log-out-outline"></ion-icon></span>
                        <span class="title">Logout</span>
                    </a>
                </li>
            {{/ifCond}}
            {{#ifCond check "===" "manager"}}
                <h2>Public</h2>
                <li>
                    <a href="#">
                        <span class="icon"><ion-icon name="help-outline"></ion-icon></span>
                        <span class="title" onclick="questionList()">Ideas</span>
                    </a>
                </li>
                <h2>Manager</h2>
                <li>
                    <a href="/idea/storedIdeas">
                        <span class="icon"><ion-icon name="albums-outline"></ion-icon></span>
                        <span class="title">Manage Idea</span>
                    </a>
                </li>
                <li>
                    <a href="/category/view">
                        <span class="icon"><ion-icon name="copy-outline"></ion-icon></span>
                        <span class="title">Manage Category</span>
                    </a>
                </li>
                <li>
                    <a href="/idea/dashBoard">
                        <span class="icon"><ion-icon name="bar-chart-outline"></ion-icon></span>
                        <span class="title">Chart</span>
                    </a>
                </li>
                <li>
                    <a href="/auth/logout" class="lout">
                        <span class="icon"><ion-icon name="log-out-outline"></ion-icon></span>
                        <span class="title">Logout</span>
                    </a>
                </li>
            {{/ifCond}}
            {{#ifCond check "===" "coordinator"}}
                <h2>Public</h2>
                <li>
                    <a href="#">
                        <span class="icon"><ion-icon name="help-outline"></ion-icon></span>
                        <span class="title" onclick="questionList()">Ideas</span>
                    </a>
                </li>
                <h2>Coordinator</h2>
                <li>
                    <a href="">
                        <span class="icon"></span>
                        <span class="title" href="#">Manage Category</span>
                    </a>
                </li>
                <li>
                    <a href="">
                        <span class="icon"></span>
                        <span class="title" href="#">For Coordinator </span>
                    </a>
                </li>
                <li>
                    <a href="/auth/logout" class="lout">
                        <span class="icon"><ion-icon name="log-out-outline"></ion-icon></span>
                        <span class="title">Logout</span>
                    </a>
                </li>
            {{/ifCond}}
            {{!-- <li class="loginSite">
                <a href="">
                    <span class="icon"><ion-icon name="log-in-outline"></ion-icon></span>
                    <span class="title" onclick="loginf()">Login</span>
                </a>
            </li> --}}



        </ul>
    </div>
</div>
<div class="main">

    {{!-- login form --}}
    <div id="loginid">
        <div class="form">
            <h2>Login</h2>
            <input id="username" type="text" class="input" name="username" placeholder="Username">
            <input id="password" type="password" class="input" name="password" placeholder="Password" required>
            <button id="btn-login" class="btn" type="submit">Submit</button>
        </div>
    </div>

    {{!-- ideas --}}
    <div id="listquestion">
        {{#each ideas}}
            <div class="list-idea">
                <a href="/idea/detail/{{this._id}}" class="list-group-item list-group-item-action">
                    <div class="d-flex w-100 justify-content-between">
                        <h5 class="mb-1">{{this.title}}</h5>
                        <small class="text-muted">{{this.createAt}}</small>
                    </div>
                    <small class="text-muted">Votes: {{this.vote}}</small>
                </a>
            </div>
            <br>
        {{/each}}

        <div class="pagination pagination-centered">
            <ul>
                {{#paginate pagination type="first"}}
                    <li {{#if disabled}}class="disabled"{{/if}}>
                        <a href="?p={{n}}">
                        First
                        </a>
                    </li>
                {{/paginate}}
                {{#paginate pagination type="previous"}}
                    <li {{#if disabled}}class="disabled"{{/if}}>
                        <a href="?p={{n}}">
                        Prev
                        </a>
                    </li>
                {{/paginate}}
                {{#paginate pagination type="middle" limit=pagination.pageCount}}
                    <li {{#if active}}class="active"{{/if}}>
                        <a href="?p={{n}}">
                            {{n}}
                        </a>
                    </li>
                {{/paginate}}
                {{#paginate pagination type="next"}}
                    <li {{#if disabled}}class="disabled"{{/if}}>
                        <a href="?p={{n}}">
                        Next
                        </a>
                    </li>
                {{/paginate}}
                {{#paginate pagination type="last"}}
                    <li {{#if disabled}}class="disabled"{{/if}}>
                        <a href="?p={{n}}">
                        Last
                        </a>
                    </li>
                {{/paginate}}
            </ul>
        </div>
    </div>
    {{!-- About this Project --}}

    {{!-- infor of team --}}
    <div id="infor">
        <h1 id="content-home">Welcome to our website project</h1>
        <div class="wrapper-coloured">
            <div class="sectiontitle">
                <h3 class="heading">Our Team</h3>
            </div>
            <div class="tm-container-inner tm-persons">
                <div class="row">
                    <article class="col-lg-6">
                        <figure class="tm-person">
                            <img src="/img/tu.jpg" alt="Image" class="img-fluid tm-person-img" />
                            <figcaption class="tm-person-description">
                                <h4 class="tm-person-name">Do Huu Tu</h4>
                                <p class="tm-person-title">Leader and Back-End Developer</p>
                            </figcaption>
                        </figure>
                    </article>
                    <article class="col-lg-6">
                        <figure class="tm-person">
                            <img src="/img/luong.jpg" alt="Image" style="width:130px; height:130px"
                                 class="img-fluid tm-person-img" />
                            <figcaption class="tm-person-description">
                                <h4 class="tm-person-name">Tran Duc Luong</h4>
                                <p class="tm-person-title">Back-End Developer and Database Designer</p>
                            </figcaption>
                        </figure>
                    </article>
                    <article class="col-lg-6">
                        <figure class="tm-person">
                            <img src="" alt="Image" class="img-fluid tm-person-img" />
                            <figcaption class="tm-person-description">
                                <h4 class="tm-person-name">Tran Van Minh</h4>
                                <p class="tm-person-title">Scrum Master</p>
                            </figcaption>
                        </figure>
                    </article>
                    <article class="col-lg-6">
                        <figure class="tm-person">
                            <img src="/img/hoanganh.jpg" alt="Image" class="img-fluid tm-person-img" />
                            <figcaption class="tm-person-description">
                                <h4 class="tm-person-name">Mai Hoang Anh</h4>
                                <p class="tm-person-title">Front-end Developer</p>
                            </figcaption>
                        </figure>
                    </article>
                    <article class="col-lg-6">
                        <figure class="tm-person">
                            <img src="" alt="Image" class="img-fluid tm-person-img" />
                            <figcaption class="tm-person-description">
                                <h4 class="tm-person-name">Ha Quyet Tien</h4>
                                <p class="tm-person-title">Tester</p>
                            </figcaption>
                        </figure>
                    </article>
                </div>
            </div>
        </div>
    </div>
</div>
{{!-- display js --}}
<script>
    let usInfor = document.getElementById('infor');
    function getus(){
        usInfor.style.display="block";
        signin.style.display="none";
    };

    //show the list of question
    let question = document.getElementById('listquestion');
    function questionList(){
        question.style.display="block";
    };

    let signin = document.getElementById('loginid');
    function loginf(){
        signin.style.display="block";
        usInfor.style.display="none";
    };
</script>
{{!-- Login Js --}}
<script>

    let isAuthenticated = false;
    function setCookie(cname, cvalue, exdays) {
        const d = new Date();
        d.setTime(d.getTime() + (exdays*24*60*60*1000));
        let expires = "expires="+ d.toUTCString();
        document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
    }
    function getCookie(cname) {
        let name = cname + "=";
        let decodedCookie = decodeURIComponent(document.cookie);
        let ca = decodedCookie.split(';');
        for(let i = 0; i <ca.length; i++) {
            let c = ca[i];
            while (c.charAt(0) == ' ') {
                c = c.substring(1);
            }
            if (c.indexOf(name) == 0) {
                return c.substring(name.length, c.length);
            }
        }
        return "";
    }

    document.addEventListener('DOMContentLoaded', function (){
        let btnLogin = document.getElementById('btn-login')

        btnLogin.onclick = function (){
            $.ajax({
                url: '/auth/login',
                method: 'POST',
                data: {
                    username: $('#username').val(),
                    password: $('#password').val(),
                }
            })
                    .then(data=>{
                        setCookie('token', data.token, 1);
                        location.assign('/main/show');
                    })
                    .catch(err=>{
                        console.log(err);
                    })
        }
    })
</script>
<script>
    //add hower for choose menu
    let list = document.querySelectorAll('.choose li');
    function activeLink(){
        list.forEach((item) =>
                item.classList.remove('hovered'));
        this.classList.add('hovered');
    }
    list.forEach((item) =>
            item.addEventListener('mouseover',activeLink));
</script>
<script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
